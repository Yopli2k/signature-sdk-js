var Lt=Object.defineProperty;var bt=p=>{throw TypeError(p)};var Ut=(p,t,e)=>t in p?Lt(p,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):p[t]=e;var E=(p,t,e)=>Ut(p,typeof t!="symbol"?t+"":t,e),ft=(p,t,e)=>t.has(p)||bt("Cannot "+e);var y=(p,t,e)=>(ft(p,t,"read from private field"),e?e.call(p):t.get(p)),F=(p,t,e)=>t.has(p)?bt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(p):t.set(p,e);var l=(p,t,e)=>(ft(p,t,"access private method"),e);import{c as x,g as Ht,M as Qt}from"./stu-sdk.min-DAnsK4yV.js";import{M as Jt,a as Ft}from"./stu_capture_encryption-DRW1D5Xh.js";var w,D,c,it,mt,yt,wt,kt,Ot,Ct,ot,K,xt,W,z,U,Pt,G,N,V,Z,A,Bt,St,Tt,It,nt,st,rt,q,ct,at,jt,M,vt,_,At,$,Et,Dt,Mt,Rt,H,Yt,Wt;const s=class s{constructor(t){F(this,c);F(this,D,{OBJECT_TEXT:{bReqd:!1,reserved:{who:l(this,c,St).bind(this),why:l(this,c,Tt).bind(this),when:l(this,c,It).bind(this)}},OBJECT_BUTTON:{bReqd:!0,reserved:{ok:l(this,c,st).bind(this),clear:l(this,c,rt).bind(this),cancel:l(this,c,q).bind(this),delete:l(this,c,ct).bind(this)}},OBJECT_IMAGE:{bReqd:!0,reserved:{ok:l(this,c,st).bind(this),clear:l(this,c,rt).bind(this),cancel:l(this,c,q).bind(this),delete:l(this,c,ct).bind(this)}},OBJECT_CHECK_BOX:{bReqd:!0,reserved:{}},OBJECT_RADIO_BUTTON:{bReqd:!0,reserved:{}},OBJECT_SIGNATURE:{bReqd:!1,reserved:{}},OBJECT_INPUT:{bReqd:!1,reserved:{}},OBJECT_INPUT_ECHO:{bReqd:!1,reserved:{}},OBJECT_HASH:{bReqd:!1,reserved:{}},OBJECT_DISPLAY_AT_SHUTDOWN:{bReqd:!1,reserved:{}},OBJECT_INKING:{bReqd:!1,reserved:{}}});this.sigSDK=t,this.reset(!1),this.useColor=!0}addObject(t,e,i,o,a,h){switch(t){case s.ObjectType.ObjectButton:return this.addObjectButton(e,i,o,a,h);case s.ObjectType.ObjectCheckbox:return this.addObjectCheckBox(e,i,o,a,h);case s.ObjectType.ObjectDisplayAtShutdown:return this.addObjectDisplayAtShutdown(e);case s.ObjectType.ObjectImage:return this.addObjectImage(e,i,o,a,h);case s.ObjectType.ObjectInking:return this.addObjectInking(e);case s.ObjectType.ObjectInput:return this.addObjectInput(e,a);case s.ObjectType.ObjectInputEcho:return this.addObjectInputEcho(e,i,o,a,h);case s.ObjectType.ObjectRadioButton:return this.addObjectRadioButton(e,i,o,a,h);case s.ObjectType.ObjectSignature:return this.addObjectSignature(e,a,h);case s.ObjectType.ObjectText:return this.addObjectText(e,i,o,a)}return null}addObjectButton(t,e,i,o,a){if(this.mPadMode==y(s,w).PadShutdown)throw"Display already set as shutdown screen: interactive elements not allowed";if(l(this,c,A).call(this,t,s.ObjectType.ObjectButton)){if(o==="")throw"Empty test";{let h=!1,d=-1,u=-1,b=s.ButtonOptions.BtnAlignCentre|s.ButtonOptions.BtnAlignMiddle;if(typeof a=="object"?(d=a.width,(!d||d<=0)&&(h=!0),u=a.height,(!u||u<=0)&&(h=!0),a.flags&&!l(this,c,jt).call(this,a.flags)?h=!0:b=a.flags):typeof a=="number"?a<=0?h=!0:d=a:h=!0,h)throw"Invalid options";{const O=this.ctx.measureText(o),g=O.width,k=O.fontBoundingBoxAscent+O.fontBoundingBoxDescent;g>d&&(d=g),k>u&&(u=k);const m=document.createElement("canvas");m.width=d,m.height=u;const P=m.getContext("2d");P.font=this.ctx.font,P.fillStyle=this.useColor?this.config.backColor:"white",P.fillRect(0,0,m.width,m.height),this.config.border.size&&(P.lineWidth=this.config.border.size,P.strokeStyle=this.useColor?this.config.border.color:"black",P.strokeRect(0,0,m.width,m.height));let S=0;b&s.ButtonOptions.BtnAlignLeft?S=0:b&s.ButtonOptions.BtnAlignRight?S=m.width-g:S=Math.floor(m.width/2-g/2),P.fillStyle=this.useColor?this.config.font.color:"black",P.fillText(o,S,O.fontBoundingBoxAscent);const C=l(this,c,z).call(this,e,i,m.width,m.height),T={id:t,type:s.ObjectType.ObjectButton,rect:new x.WacomGSS.STU.Protocol.Rectangle(C.x,C.y,C.x+m.width-1,C.y+m.height-1),image:m,painted:!1,font:P.font,backColor:this.mObjectBackgroundColor,foreColor:this.mObjectForegroundColor,text:o,flags:b,config:JSON.parse(JSON.stringify(this.config))};return this.objects.push(T),this.mPadMode==y(s,w).PadIndeterminate&&(this.mPadMode=y(s,w).PadInteractive),T}}}else throw"Invalid Id"}addObjectCheckBox(t,e,i,o,a){let h=s.CheckboxOptions.CheckboxUnchecked;if(a)if(l(this,c,Et).call(this,a))h=a;else throw"Invalid options";if(this.mPadMode==y(s,w).PadShutdown)throw"Display already set as shutdown screen: interactive elements not allowed";if(this.mPadMode==y(s,w).PadInking)throw"Incompatible mode";if(l(this,c,A).call(this,t,s.ObjectType.ObjectCheckbox)){if(o==="")throw"Empty test";if(this.ctx){let d;this.config.checkbox&&this.config.checkbox.size&&(this.ctx.font=l(this,c,W).call(this,{size:this.config.checkbox.size})),d=this.ctx.font;let u=this.ctx.measureText("☐ ");const b=u.width,O=u.width,g=u.fontBoundingBoxAscent+u.fontBoundingBoxDescent;u=this.ctx.measureText("☐");const k=u.width,m=u.fontBoundingBoxAscent+u.fontBoundingBoxDescent,P=l(this,c,z).call(this,e,i,O,g);this.config.checkbox&&this.config.checkbox.size&&(this.ctx.font=l(this,c,W).call(this,{size:this.config.font.size}));const S=this.addObjectText("",Math.floor(e+b),Math.floor(i),o),C=S.rect.lowerRightYpixel-S.rect.upperLeftYpixel,T={id:t,type:s.ObjectType.ObjectCheckbox,checked:h&s.CheckboxOptions.CheckboxChecked,style:h&~s.CheckboxOptions.CheckboxChecked,font:d,rect:new x.WacomGSS.STU.Protocol.Rectangle(P.x,Math.floor(P.y-Math.trunc((m-C)/2)),Math.floor(P.x+k),Math.floor(P.y-(m-C)/2+m)),backColor:this.mObjectBackgroundColor,foreColor:this.mObjectForegroundColor,text:o};return this.objects.push(T),l(this,c,M).call(this,T),T}else throw"Not drawing context"}else throw"Invalid id"}addObjectDisplayAtShutdown(t){if(this.mPadMode!=y(s,w).PadIndeterminate&&this.mPadMode!=s.PadMode.PadShutdown)throw"Objects already set include interactive elements (not allowed on shutdown screen)";if(l(this,c,A).call(this,t,s.ObjectType.ObjectDisplayAtShutdown))this.mPadMode=y(s,w).PadShutdown;else throw"Invalid Id";return{id:t,type:s.ObjectType.ObjectDisplayAtShutdown}}addObjectImage(t,e,i,o,a){if(this.mPadMode==y(s,w).PadShutdown)throw"Display already set as shutdown screen: interactive elements not allowed";if(l(this,c,A).call(this,t,s.ObjectType.ObjectImage))if(o){const h=document.createElement("canvas");h.width=a&&a.width?a.width:o.width,h.height=a&&a.height?a.height:o.height;const d=h.getContext("2d");d.fillStyle=this.config.backColor,d.fillRect(0,0,h.width,h.height),d.drawImage(o,0,0,h.width,h.height);const u=l(this,c,z).call(this,e,i,h.width,h.height),b={type:s.ObjectType.ObjectImage,rect:new x.WacomGSS.STU.Protocol.Rectangle(u.x,u.y,u.x+h.width-1,u.y+h.height-1),image:h,painted:!1};return t&&(b.id=t),this.objects.push(b),this.mPadMode==y(s,w).PadIndeterminate&&(this.mPadMode=y(s,w).PadInteractive),b}else throw"Empty image";else throw"Invalid Id"}addObjectInking(t){if(this.mPadMode==y(s,w).PadSigning||this.mPadMode==y(s,w).PadShutdown||this.mPadMode==y(s,w).PadInking)throw"Already setted incompabitle objects";if(l(this,c,A).call(this,t,s.ObjectType.ObjectInking)){this.mPadMode=y(s,w).PadInking,this.inkingCanvas=document.createElement("canvas"),this.inkingCanvas.width=this.mCapability.screenWidth,this.inkingCanvas.height=this.mCapability.screenHeight;const e={id:t,type:s.ObjectType.ObjectInking};return this.objects.push(e),e}else throw"Invalid Id"}addObjectInput(t,e){if(this.mInput)throw"Multiple inputs";if(this.mSig)throw"Input is incompatible with signature object";if(this.mPadMode==y(s,w).PadShutdown)throw"Display already set as shutdown screen: interactive elements not allowed";if(l(this,c,A).call(this,t,s.ObjectType.ObjectInput)){if(!e instanceof Object)throw"Invalid input object";{this.mInput=e,e.maxLength||(e.maxLength=4),e.minLength||(e.minLength=0),this.mInput.input="",this.mPadMode=y(s,w).PadInput;const i={id:t,type:s.ObjectType.ObjectInput,minLength:e.minLength,maxLength:e.maxLength};return this.objects.push(i),i}}else throw"Invalid Id"}addObjectInputEcho(t,e,i,o,a){if(this.mInput){if(o&&o.length!=1)throw"data parameter should be either empty or a single char";{let d=0;const u=s.InputEchoOptions.EchoNoSpacing|s.InputEchoOptions.EchoHalfSpacing|s.InputEchoOptions.EchoSingleSpacing|s.InputEchoOptions.EchoDoubleSpacing;switch(a&u){case s.InputEchoOptions.EchoNoSpacing:d=0;break;case s.InputEchoOptions.EchoHalfSpacing:d=.5;break;case s.InputEchoOptions.EchoSingleSpacing:d=1;break;case s.InputEchoOptions.EchoDoubleSpacing:d=2;break}const b=a&s.InputEchoOptions.EchoUnderline;let O=this.ctx.measureText("_");for(var h=0;h<this.mInput.maxLength;h++){const g=document.createElement("canvas");g.width=O.width+1,g.height=O.fontBoundingBoxAscent+O.fontBoundingBoxDescent+1;const k=g.getContext("2d");k.font=this.ctx.font,k.fillStyle=this.useColor?this.config.backColor:"white",k.fillRect(0,0,g.width,g.height),k.fillStyle=this.useColor?this.config.borderColor:"black",k.fillText(h==0||b?"_":" ",0,O.fontBoundingBoxAscent);const m=l(this,c,z).call(this,e,i,g.width,g.height),P=m.x+h*O.width+h*d*O.width,S={id:t,type:s.ObjectType.ObjectInputEcho,rect:new x.WacomGSS.STU.Protocol.Rectangle(P,m.y,P+g.width-1,m.y+g.height-1),image:g,painted:!1,index:h,font:k.font,backColor:this.config.backColor,foreColor:this.config.borderColor,putUnderline:b,data:o};this.objects.push(S)}}}else throw"There is no input object"}addObjectRadioButton(t,e,i,o,a){if(this.mPadMode==y(s,w).PadShutdown)throw"Display already set as shutdown screen: interactive elements not allowed";if(this.mPadMode==y(s,w).PadInking)throw"Incompatible mode";if(l(this,c,A).call(this,t,s.ObjectType.ObjectRadioButton)){if(o==="")throw"Empty test";if(!a||!a.Group)throw"Invalid group";{let h;this.config.radiobutton&&this.config.radiobutton.size&&(this.ctx.font=l(this,c,W).call(this,{size:this.config.radiobutton.size})),h=this.ctx.font;let d=this.ctx.measureText("◯ ");const u=d.width,b=d.width,O=d.fontBoundingBoxAscent+d.fontBoundingBoxDescent;d=this.ctx.measureText("◯");const g=d.width,k=d.fontBoundingBoxAscent+d.fontBoundingBoxDescent,m=l(this,c,z).call(this,e,i,b,O);this.config.radiobutton&&this.config.radiobutton.size&&(this.ctx.font=l(this,c,W).call(this,{size:this.config.font.size}));const P=this.addObjectText("",Math.floor(m.x+u),m.y,o),S=P.rect.lowerRightYpixel-P.rect.upperLeftYpixel,C={id:t,type:s.ObjectType.ObjectRadioButton,group:a.Group,checked:a.Checked,font:h,rect:new x.WacomGSS.STU.Protocol.Rectangle(m.x,Math.floor(m.y-Math.trunc((k-S)/2)),Math.floor(m.x+g),Math.floor(m.y-(k-S)/2+k)),backColor:this.mObjectBackgroundColor,foreColor:this.mObjectForegroundColor,text:o};return this.objects.push(C),C.checked?(C.checked=!1,l(this,c,$).call(this,C)):l(this,c,M).call(this,C),C}}else throw"Invalid id"}addObjectSignature(t,e,i){if(this.mPadMode!=y(s,w).PadIndeterminate&&this.mPadMode!=s.PadMode.PadSigning)throw"Already setted incompabitle objects";if(l(this,c,A).call(this,t,s.ObjectType.ObjectSignature))if(e)this.mPadMode=y(s,w).PadSigning,this.mSigObj=e,this.mSigOptions=i;else throw"Invalid signature object";else throw"Invalid Id";const o={id:t,type:s.ObjectType.ObjectSignature};return this.objects.push(o),o}addObjectText(t,e,i,o){if(o==="")throw"Empty text";if(!l(this,c,A).call(this,t,s.ObjectType.ObjectText))throw"Invalid Id";if(!this.ctx)throw"Not drawing context";let a=[],h=0,d=0,u=0;typeof e=="number"&&(u=e);const b=o.split(`
`);for(var O=0;O<b.length;O++){let C=b[O],T=C.length,v=0;do{const B=l(this,c,Wt).call(this,C,this.mCapability.screenWidth-u),I=C.substring(0,B).trim();I.length>h&&(d=a.length,h=I.length),a.push(I),C=C.substring(B),v+=B}while(v<T)}const g=this.ctx.measureText(a[d]),k=g.fontBoundingBoxAscent+g.fontBoundingBoxDescent,m=g.width,P=k*a.length,S=l(this,c,z).call(this,e,i,m,P);for(var O=0;O<a.length;O++){const T=a[O];let v=this.ctx.measureText(T),B=0;this.config.border.size&&(B=this.config.border.size);let I=document.createElement("canvas");I.width=v.width+B*2+1,I.height=v.fontBoundingBoxAscent+v.fontBoundingBoxDescent+B*2+1;let j=I.getContext("2d");j.imageSmoothingEnabled=!1,j.fontSmooth="never",j.font=this.ctx.font,j.fillStyle=this.useColor?this.config.backColor:"white",j.fillRect(0,0,I.width,I.height),j.fillStyle=this.useColor?this.config.font.color:"black",j.fillText(T,B,v.fontBoundingBoxAscent+B),this.config.border.size&&(j.lineWidth=this.config.border.size,j.strokeStyle=this.useColor?this.config.border.color:"black",j.strokeRect(0,0,I.width,I.height));const L={id:t,type:s.ObjectType.ObjectText,rect:new x.WacomGSS.STU.Protocol.Rectangle(S.x,S.y+k*O,S.x+I.width-1,S.y+I.height-1+k*O),image:I,painted:!1};this.objects.push(L);let ut=y(this,D)[s.ObjectType.ObjectText].reserved[t];return ut&&ut(o),L}return null}addPrimitive(t,e,i,o,a,h=1,d){switch(e=="left"?e=0:e=="centre"?e=this.mCapability.screenWidth/2:e=="right"&&(e=this.mCapability.screenWidth),e=Math.floor(e),i=="top"?i=0:i=="middle"?i=this.mCapability.screenHeight/2:i=="bottom"&&(i=this.mCapability.screenHeight),i=Math.floor(i),o=="left"?o=0:o=="centre"?o=this.mCapability.screenWidth/2:o=="right"&&(o=this.mCapability.screenWidth),o=Math.floor(o),a=="top"?a=0:a=="middle"?a=this.mCapability.screenHeight/2:a=="bottom"&&(a=this.mCapability.screenHeight),a=Math.floor(a),t){case s.PrimitiveType.Line:if(d){if(!l(this,c,Dt).call(this,d))throw"Parameter options invalid"}else d=s.PrimitiveOptions.LineSolid;break;case s.PrimitiveType.Rectangle:case s.PrimitiveType.Ellipse:if(d){if(!l(this,c,Mt).call(this,d))throw"Parameter options invalid"}else d=s.PrimitiveOptions.LineSolid|s.PrimitiveOptions.Outline;break}const u=document.createElement("canvas");u.width=o-e>h?o-e:h,u.height=a-i>h?a-i:h;const b=u.getContext("2d");switch(b.fillStyle=this.config.backColor,b.fillRect(0,0,u.width,u.height),b.lineWidth=h,b.strokeStyle=this.useColor?this.config.borderColor:"black",b.fillStyle=this.useColor?this.config.fillColor:"black",d&s.PrimitiveOptions.LineDashed&&b.setLineDash([h]),t){case s.PrimitiveType.Line:b.beginPath(),b.moveTo(0,0),b.lineTo(o-e,a-i),b.stroke();break;case s.PrimitiveType.Rectangle:d&s.PrimitiveOptions.Fill&&(d&s.PrimitiveOptions.LineDashed?b.fillRect(h/2,h/2,o-e-h,a-i-h):b.fillRect(0,0,o-e,a-i)),(d&s.PrimitiveOptions.LineSolid||d&s.PrimitiveOptions.LineDashed)&&b.strokeRect(0,0,o-e,a-i);break;case s.PrimitiveType.Ellipse:d&s.PrimitiveOptions.Fill?d&s.PrimitiveOptions.LineSolid||d&s.PrimitiveOptions.LineDashed?(b.beginPath(),b.ellipse((o-e)/2,(a-i)/2,(o-e)/2-h,(a-i)/2-h,Math.PI/4,0,2*Math.PI),b.fill(),b.beginPath(),b.ellipse((o-e)/2,(a-i)/2,(o-e-h)/2,(a-i-h)/2,Math.PI/4,0,2*Math.PI),b.stroke()):(b.beginPath(),b.ellipse((o-e)/2,(a-i)/2,(o-e)/2,(a-i)/2,Math.PI/4,0,2*Math.PI),b.fill()):(b.beginPath(),b.ellipse((o-e)/2,(a-i)/2,(o-e-h)/2,(a-i-h)/2,Math.PI/4,0,2*Math.PI),b.stroke());break}const O={type:s.ObjectType.ObjectPrimitive,rect:new x.WacomGSS.STU.Protocol.Rectangle(e,i,o-e>h?o-1:e+h-1,a-i>h?a-1:i+h-1),image:u,painted:!1};return this.objects.push(O),O}async display(t){t&&(t=this.supportsArea),this.config.forceMonochrome&&(this.mEncodingMode=x.WacomGSS.STU.Protocol.EncodingMode.EncodingMode_1bit,this.useColor=!1),t&&await l(this,c,Pt).call(this),await l(this,c,U).call(this,t);for(var e=0;e<this.objects.length;e++)this.mInput&&this.objects[e].id&&this.objects[e].id.length==1&&(this.objects[e].handleInput=!0);this.mPadMode==y(s,w).PadSigning||this.mPadMode==y(s,w).PadInking?await this.mTablet.setInkingMode(x.WacomGSS.STU.Protocol.InkingMode.On):await this.mTablet.setInkingMode(x.WacomGSS.STU.Protocol.InkingMode.Off)}async fireClick(t){for(var e=0;e<this.objects.length;e++)if(this.objects[e].id==t){const i=this.objects[e];if(i.type==s.ObjectType.ObjectCheckbox)i.checked==0?i.checked=1:i.checked=0,l(this,c,M).call(this,i),await l(this,c,U).call(this);else if(i.type==s.ObjectType.ObjectRadioButton)l(this,c,$).call(this,i),await l(this,c,U).call(this);else{const o=y(this,D)[this.objects[e].type].reserved[t];o?await o()||this.objects[e].onClick&&this.objects[e].onClick(this.objects[e]):this.objects[e].onClick&&this.objects[e].onClick(this.objects[e])}}}async padConnect(t){if(!this.currentDevice){let e=await x.WacomGSS.STU.UsbDevice.requestDevices();if(e.length>0)this.currentDevice=e[0];else return!1}this.mTablet=new x.WacomGSS.STU.Tablet,this.mTablet.addTabletHandler(this),t&&(t.encryptionHandler&&this.mTablet.setEncryptionHandler(t.encryptionHandler),t.encryptionHandler2&&this.mTablet.setEncryptionHandler2(t.encryptionHandler2));try{await this.mTablet.usbConnect(this.currentDevice),this.mCapability=await this.mTablet.getCapability(),this.mInformation=await this.mTablet.getInformation(),this.mInkThreshold=await this.mTablet.getInkThreshold(),l(this,c,K).call(this);try{await this.mTablet.setPenDataOptionMode(x.WacomGSS.STU.Protocol.PenDataOptionMode.TimeCountSequence)}catch{}await this.mTablet.setClearScreen(),await this.mTablet.setInkingMode(x.WacomGSS.STU.Protocol.InkingMode.Off)}catch(e){return console.log(e),!1}return this.canvas=document.createElement("canvas"),this.canvas.width=this.mCapability.screenWidth,this.canvas.height=this.mCapability.screenHeight,this.ctx=this.canvas.getContext("2d"),this.ctx.font=l(this,c,W).call(this),this.mScaleX=this.mCapability.screenWidth/this.mCapability.tabletMaxX,this.mScaleY=this.mCapability.screenHeight/this.mCapability.tabletMaxY,this.supportsArea=l(this,c,xt).call(this),this.connected=!0,!0}async padDisconnect(){this.connected=!1,this.mTablet!=null&&(this.mIsEncrypted&&(await this.mTablet.endCapture(),this.mIsEncrypted=!1),await this.mTablet.setInkingMode(x.WacomGSS.STU.Protocol.InkingMode.Off),this.mPadMode!=y(s,w).PadShutdown&&await this.mTablet.setClearScreen(),await this.mTablet.disconnect(),delete this.mTablet,this.mTablet=null)}padModelName(){return this.mInformation?this.mInformation.modelName:""}padHeight(){return this.mCapability?this.mCapability.screenHeight:0}padWidth(){return this.mCapability?this.mCapability.screenWidth:0}async reset(t=!0){this.objects=[],this.mPadMode=y(s,w).PadIndeterminate,this.mObjectForegroundColor="black",this.mObjectBackgroundColor="white",this.mFont={},this.mInput=null,this.mPenEvents=[],this.mPenData=[],this.mObject=null,this.mSigObj=null,this.mSigOptions=null,this.emptyWaitCanvas=null,this.emptyWaitRect=null,this.inkingCanvas=null,this.mirrorCanvas&&(document.getElementById(this.config.mirrorDiv.id).removeChild(this.mirrorCanvas),this.mirrorCanvas=null),t&&(await this.mTablet.setClearScreen(),this.config.mirrorDiv&&(this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.canvas,0,0))),this.config={font:{name:"Verdana",size:"10px",color:"black"},border:{color:"black",style:"none"},backColor:"white",borderColor:"black",fillColor:"white",pushed:{font:{color:"white"},border:{color:"white"},backColor:"black",borderColor:"white",fillColor:"white"}},l(this,c,K).call(this)}async setProperty(t){l(this,c,it).call(this,t,this.config),t.pushed&&(this.config.pushed||(this.config.pushed={}),l(this,c,it).call(this,t.pushed,this.config.pushed)),this.ctx&&(this.ctx.font=l(this,c,W).call(this)),this.config.encrypted!=null&&(this.config.encrypted?this.mIsEncrypted||await l(this,c,mt).call(this):this.mIsEncrypted&&await l(this,c,yt).call(this))}onPenDataOption(t,e){this.onPenData(t,e)}onPenDataTimeCountSequence(t,e){this.onPenData(t,e)}onPenDataTimeCountSequenceEncrypted(t,e){this.onPenDataTimeCountSequence(t,e)}onPenDataEncryptedOption(t,e){this.onPenData(t.penData1,e),this.onPenData(t.penData2,e)}onPenDataEncrypted(t,e){this.onPenData(t.penData1,e),this.onPenData(t.penData2,e)}async onPenData(t,e){t.timeCount||(t.timeCount=Math.trunc(e)%1e6),this.mPenEvents.push(t),this.mPenEvents.length==1&&await l(this,c,ot).call(this)}};w=new WeakMap,D=new WeakMap,c=new WeakSet,it=function(t,e){t.font&&(e.font||(e.font={}),t.font.name&&(e.font.name=t.font.name),t.font.size&&(e.font.size=t.font.size),t.font.style&&(e.font.style=t.font.style),t.font.color&&(e.font.color=t.font.color)),t.border&&(e.border||(e.border={}),t.border.size&&(e.border.size=t.border.size),t.border.color&&(e.border.color=t.border.color),t.border.style&&(e.border.style=e.border.style)),t.checkbox&&(e.checkbox||(e.checkbox={}),t.checkbox.size&&(e.checkbox.size=t.checkbox.size)),t.radiobutton&&(e.radiobutton||(e.radiobutton={}),t.radiobutton.size&&(e.radiobutton.size=t.radiobutton.size)),t.backColor&&(e.backColor=t.backColor),t.borderColor&&(e.borderColor=t.borderColor),t.fillColor&&(e.fillColor=t.fillColor),t.mirrorDiv&&(e.mirrorDiv||(e.mirrorDiv={}),t.mirrorDiv.id&&(e.mirrorDiv.id=t.mirrorDiv.id),t.mirrorDiv.width&&(e.mirrorDiv.width=t.mirrorDiv.width),t.mirrorDiv.height&&(e.mirrorDiv.height=t.mirrorDiv.height),t.mirrorDiv.enable!==void 0&&(e.mirrorDiv.enable=t.mirrorDiv.enable)),t.encrypted!==void 0&&(e.encrypted=t.encrypted),t.sessionId&&(e.sessionId=t.sessionId),t.forceMonochrome!==void 0&&(e.forceMonochrome=t.forceMonochrome,l(this,c,K).call(this)),t.invert!==void 0&&(e.invert=t.invert)},mt=async function(){this.connected&&(this.mTablet.isSupported(x.WacomGSS.STU.Protocol.ReportId.EncryptionStatus_$LI$())||await x.WacomGSS.STU.Protocol.ProtocolHelper.supportsEncryption(this.mTablet.getProtocol()))&&(await this.mTablet.startCapture(this.config.sessionId),this.mIsEncrypted=!0)},yt=async function(){this.mIsEncrypted&&(await this.mTablet.endCapture(),this.mIsEncrypted=!1)},wt=function(t){return new s.Point(t.x*this.mScaleX,t.y*this.mScaleY)},kt=function(t,e){return new s.Point(t/this.mScaleX,e/this.mScaleY)},Ot=function(t,e){return e.x>=t.upperLeftXpixel&&e.x<=t.lowerRightXpixel&&e.y<=t.lowerRightYpixel&&e.y>=t.upperLeftYpixel},Ct=function(t){for(var e=this.objects.length-1;e>-1;e--)if(this.objects[e].rect&&l(this,c,Ot).call(this,this.objects[e].rect,t))return this.objects[e];return null},ot=async function(){if(!this.connected)return;const t=this.mPenEvents[0];let e=!1;const i=l(this,c,wt).call(this,t),o=l(this,c,Ct).call(this,i);this.mObject!=null&&o==null&&this.mObject.type==s.ObjectType.ObjectButton&&this.mObject.pushed&&(this.mObject.pushed=!1,l(this,c,M).call(this,this.mObject),e=!0);const a=t.pressure>this.mInkThreshold.onPressureMark;if(this.mIsDown)if(a){if(!t.fromMouse&&(this.mObject==null||this.mObject.type!=s.ObjectType.ObjectButton&&this.mObject.type!=s.ObjectType.ObjectImage)&&(this.mPadMode==y(s,w).PadSigning||this.mPadMode==y(s,w).PadInking)){this.mPenData.push(t);var u=new PointerEvent("pointermove",{pointerId:1,pointerType:"pen",isPrimary:!0,clientX:i.x,clientY:i.y,pressure:t.pressure/this.mCapability.tabletMaxPressure});this.mirrorCanvas&&l(this,c,N).call(this,u),this.mPadMode==y(s,w).PadInking&&l(this,c,V).call(this,u)}}else{if(this.mObject!=null){if(o!=null&&o.id==this.mObject.id){if(o.type==s.ObjectType.ObjectCheckbox)o.checked==0?o.checked=1:o.checked=0,l(this,c,M).call(this,o),e=!0;else if(o.type==s.ObjectType.ObjectRadioButton)l(this,c,$).call(this,o),e=!0;else if(o.type==s.ObjectType.ObjectButton&&o.pushed){o.pushed=!1,l(this,c,M).call(this,o),e=!0;let b=y(this,D)[s.ObjectType.ObjectButton].reserved[o.id];if(b){if(o.id=="delete")b()&&(e=!0);else if(await b())return}}if(o.handleInput&&l(this,c,Rt).call(this,o)&&(l(this,c,at).call(this,o),e=!0),o.onClick&&await o.onClick(o)){this.mPenEvents=[];return}}}else if(!t.fromMouse&&(this.mObject==null||this.mObject.type!=s.ObjectType.ObjectButton&&this.mObject.type!=s.ObjectType.ObjectImage)&&(this.mPadMode==y(s,w).PadSigning||this.mPadMode==y(s,w).PadInking)){this.mPenData.push(t);var d=new PointerEvent("pointerup",{pointerId:1,pointerType:"pen",isPrimary:!0,clientX:i.x,clientY:i.y,pressure:t.pressure/this.mCapability.tabletMaxPressure});this.mirrorCanvas&&l(this,c,N).call(this,d),this.mPadMode==y(s,w).PadInking&&l(this,c,V).call(this,d)}this.mObject=null,this.mIsDown=!1}else if(a)if(this.mIsDown=!0,this.mObject=o,this.mObject==null){if(!t.fromMouse&&(this.mPadMode==y(s,w).PadSigning||this.mPadMode==y(s,w).PadInking)){this.mPenData.push(t);var h=new PointerEvent("pointerdown",{pointerId:1,pointerType:"pen",isPrimary:!0,clientX:i.x,clientY:i.y,pressure:t.pressure/this.mCapability.tabletMaxPressure});this.mirrorCanvas&&l(this,c,N).call(this,h),this.mPadMode==y(s,w).PadInking&&l(this,c,V).call(this,h)}}else this.mObject.type==s.ObjectType.ObjectButton&&(this.mObject.pushed=!0,l(this,c,M).call(this,this.mObject),e=!0);else(this.mPadMode==y(s,w).PadSigning||this.mPadMode==y(s,w).PadInking)&&(t.fromMouse||this.mPenData.push(t));e&&await l(this,c,U).call(this),this.mPenEvents.shift(),this.mPenEvents.length>0&&await l(this,c,ot).call(this)},K=function(){if(this.config.forceMonochrome)this.mEncodingMode=x.WacomGSS.STU.Protocol.EncodingMode.EncodingMode_1bit,this.useColor=!1;else if(this.mTablet){let t=x.WacomGSS.STU.Protocol.ProtocolHelper.simulateEncodingFlag(this.mTablet.getProductId(),this.mCapability.encodingFlag);t&x.WacomGSS.STU.Protocol.EncodingFlag.EncodingFlag_24bit?(this.mEncodingMode=x.WacomGSS.STU.Protocol.EncodingMode.EncodingMode_24bit,this.useColor=!0):t&x.WacomGSS.STU.Protocol.EncodingFlag.EncodingFlag_16bit?(this.mEncodingMode=x.WacomGSS.STU.Protocol.EncodingMode.EncodingMode_16bit,this.useColor=!0):(this.mEncodingMode=x.WacomGSS.STU.Protocol.EncodingMode.EncodingMode_1bit,this.useColor=!1)}},xt=function(){return this.mTablet.isSupported(x.WacomGSS.STU.Protocol.ReportId.StartImageDataArea_$LI$())},W=function(t){let e="";return t&&t.style?e+=this.data.style+" ":this.config.font.style&&(e+=this.config.font.style+" "),t&&t.size?e+=t.size+" ":this.config.font.size&&(e+=this.config.font.size+" "),t&&t.name?e+=t.name+" ":this.config.font.name&&(e+=this.config.font.name+" "),e},z=function(t,e,i,o){return t=="left"?t=0:t=="centre"?t=this.mCapability.screenWidth/2-i/2:t=="right"&&(t=this.mCapability.screenWidth-i),e=="top"?e=0:e=="middle"?e=this.mCapability.screenHeight/2-o/2:e=="bottom"&&(e=this.mCapability.screenHeight-o),{x:Math.floor(t),y:Math.floor(e)}},U=async function(t){if(!this.supportsArea||t){let i,o,a,h;if(!this.supportsArea)i=0,o=this.mCapability.screenWidth,a=0,h=this.mCapability.screenHeight;else{i=this.mCapability.screenWidth,o=0,a=this.mCapability.screenHeight,h=0;for(var e=0;e<this.objects.length;e++)this.objects[e].painted!==void 0&&!this.objects[e].painted&&(i=Math.min(i,this.objects[e].rect.upperLeftXpixel),a=Math.min(a,this.objects[e].rect.upperLeftYpixel),o=Math.max(o,this.objects[e].rect.lowerRightXpixel),h=Math.max(h,this.objects[e].rect.lowerRightYpixel));this.emptyWaitRect&&(i=Math.min(i,this.emptyWaitRect.upperLeftXpixel),a=Math.min(a,this.emptyWaitRect.upperLeftYpixel),o=Math.max(o,this.emptyWaitRect.lowerRightXpixel),h=Math.max(h,this.emptyWaitRect.lowerRightYpixel))}const d=document.createElement("canvas");d.width=o-i,d.height=h-a;const u=d.getContext("2d");u.fillStyle="white",u.fillRect(0,0,d.width,d.height),this.emptyWaitCanvas&&this.ctx.drawImage(this.emptyWaitCanvas,this.emptyWaitRect.upperLeftXpixel,this.emptyWaitRect.upperLeftYpixel);for(var e=0;e<this.objects.length;e++)this.objects[e].painted!==void 0&&!this.objects[e].painted&&(u.drawImage(this.objects[e].image,this.objects[e].rect.upperLeftXpixel-i,this.objects[e].rect.upperLeftYpixel-a),this.objects[e].painted=!0);const b=new x.WacomGSS.STU.Protocol.Rectangle(i,a,o-1,h-1),O=x.WacomGSS.STU.Protocol.ProtocolHelper.resizeAndFlatten(d,0,0,d.width,d.height,d.width,d.height,this.mEncodingMode,0,"white",!1,!1);this.supportsArea?await this.mTablet.writeImageArea(this.mEncodingMode,b,O):await this.mTablet.writeImage(this.mEncodingMode,O),this.config.mirrorDiv&&(this.ctx.drawImage(d,i,a),l(this,c,G).call(this))}else for(var e=0;e<this.objects.length;e++)if(this.objects[e].painted!==void 0&&!this.objects[e].painted){const o=this.objects[e].image,a=x.WacomGSS.STU.Protocol.ProtocolHelper.resizeAndFlatten(o,0,0,o.width,o.height,o.width,o.height,this.mEncodingMode,0,"white",!1,!1);await this.mTablet.writeImageArea(this.mEncodingMode,this.objects[e].rect,a),this.objects[e].painted=!0,this.config.mirrorDiv&&(this.ctx.drawImage(o,this.objects[e].rect.upperLeftXpixel,this.objects[e].rect.upperLeftYpixel),l(this,c,G).call(this))}},Pt=async function(){this.ctx.font="60pt Wingdings";const t="6",e=this.ctx.measureText(t),i=e.width,o=e.fontBoundingBoxAscent+e.fontBoundingBoxDescent,a=Math.max(i,o),h=3,d=document.createElement("canvas");d.width=a,d.height=a;const u=d.getContext("2d");u.font=this.ctx.font,u.fillStyle="white",u.fillRect(0,0,d.width,d.height),u.fillStyle="black",u.fillText(t,i/2-h,(o+e.fontBoundingBoxAscent)/2-h),u.strokeStyle="black",u.lineWidth=h,u.beginPath(),u.arc(a/2,a/2,(a-h*2)/2,0,2*Math.PI),u.stroke();const b=Math.floor(this.mCapability.screenWidth/2-a/2),O=Math.floor(this.mCapability.screenHeight/2-a/2),g=x.WacomGSS.STU.Protocol.ProtocolHelper.resizeAndFlatten(d,0,0,d.width,d.height,d.width,d.height,this.mEncodingMode,0,"white",!1,!1),k=new x.WacomGSS.STU.Protocol.Rectangle(b,O,b+d.width-1,O+d.height-1);await this.mTablet.writeImageArea(this.mEncodingMode,k,g),this.config.mirrorDiv&&(this.ctx.drawImage(d,b,O),l(this,c,G).call(this)),u.fillStyle="white",u.fillRect(0,0,d.width,d.height),this.emptyWaitCanvas=d,this.emptyWaitRect=k},G=function(){if(this.config.mirrorDiv){const t=document.getElementById(this.config.mirrorDiv.id);let e=this.canvas.width,i=this.canvas.height;if(this.config.mirrorDiv.width?(e=this.config.mirrorDiv.width,this.config.mirrorDiv.height?i=this.config.mirrorDiv.height:i=e/this.canvas.width*i):this.config.mirrorDiv.height&&(i=this.config.mirrorDiv.height,e=i/this.canvas.height*e),t){this.mirrorCanvas&&t.removeChild(this.mirrorCanvas);const o=document.createElement("canvas");o.addEventListener("pointermove",l(this,c,Z).bind(this)),o.addEventListener("pointerdown",l(this,c,Z).bind(this)),o.addEventListener("pointerup",l(this,c,Z).bind(this)),o.width=e,o.height=i;const a=o.getContext("2d");a.imageSmoothingEnabled=!0,a.drawImage(this.canvas,0,0,e,i),this.mirrorCanvas=t.appendChild(o)}}},N=function(t){const e=this.mirrorCanvas.width/this.canvas.width*t.clientX,i=this.mirrorCanvas.height/this.canvas.height*t.clientY;if(t.type=="pointermove"&&this.lastX){const o=this.mirrorCanvas.getContext("2d");o.beginPath(),o.moveTo(this.lastX,this.lastY),o.lineTo(e,i),o.strokeStyle="black",o.lineWidth=1,o.stroke(),o.closePath()}t.type!="pointerup"?(this.lastX=e,this.lastY=i):(this.lastX=null,this.lastY=null)},V=function(t){if(t.type=="pointermove"&&this.lastInkingX){const e=this.inkingCanvas.getContext("2d");e.beginPath(),e.moveTo(this.lastInkingX,this.lastInkingY),e.lineTo(t.clientX,t.clientY),e.strokeStyle="black",e.lineWidth=1,e.stroke(),e.closePath()}t.type!="pointerup"?(this.lastInkingX=t.clientX,this.lastInkingY=t.clientY):(this.lastInkingX=null,this.lastInkingY=null)},Z=function(t){if(this.config.mirrorDiv.enable){const e=this.canvas.width/this.mirrorCanvas.width*t.offsetX,i=this.canvas.height/this.mirrorCanvas.height*t.offsetY,o=l(this,c,kt).call(this,e,i);this.onPenData({x:o.x,y:o.y,pressure:t.buttons==1?this.mInkThreshold.onPressureMark+1:0,rdy:1,sw:t.buttons==1,timeCount:t.timeStamp,fromMouse:!0},t.timeStamp)}},A=function(t,e){if(!t)return!y(this,D)[e].bReqd;if(l(this,c,Bt).call(this,t)>=0)return!1;if(!y(this,D)[e].reserved[t]){for(var i in this.IdRules)if(i!=e&&y(this,D)[i].reserved[t])return!1}return!0},Bt=function(t){return this.objects.forEach(function(e,i){if(e.id==t)return i}),-1},St=function(t){this.who=t},Tt=function(t){this.why=t},It=function(t){this.when=t},nt=function(){for(let t=0;t<this.mPenData.length;t++)if(this.mPenData[t].sw!=0)return!0;return!1},st=async function(){if(this.mPadMode==y(s,w).PadSigning){if(l(this,c,nt).call(this)){const e=l(this,c,Yt).call(this);e.then(i=>{if(i){l(this,c,q).call(this);let a;for(var o=this.objects.length-1;o>-1;o--)this.objects[o].type==s.ObjectType.ObjectSignature&&(a=this.objects[o]);if(a&&a.onSignatureCaptured)return a.onSignatureCaptured(this.mSigObj)}else alert("Error")}),e.catch(i=>{alert(i)})}}else if(this.mPadMode==y(s,w).PadInking&&l(this,c,nt).call(this)>0){let e;for(var t=this.objects.length-1;t>-1;t--)this.objects[t].type==s.ObjectType.ObjectInking&&(e=this.objects[t]);if(e&&e.onInkingCaptured)return e.onInkingCaptured(this.inkingCanvas.toDataURL("image/png"))}return!1},rt=async function(){if(this.mPadMode==y(s,w).PadInput&&this.mInput){for(var t=0;t<this.objects.length;t++)this.objects[t].type==s.ObjectType.ObjectInputEcho&&l(this,c,H).call(this,this.objects[t],this.objects[t].index==0||this.objects[t].putUnderline?"_":" ");this.mInput.input="",await l(this,c,U).call(this)}else if(this.mPadMode==y(s,w).PadSigning||this.mPadMode==y(s,w).PadInking){if(this.mPadMode==y(s,w).PadInking){const e=this.inkingCanvas.getContext("2d");e.fillStyle="white",e.fillRect(0,0,this.inkingCanvas.width,this.inkingCanvas.height)}this.mPenData=[],await this.mTablet.setClearScreen();for(var t=0;t<this.objects.length;t++)this.objects[t].painted!==void 0&&(this.objects[t].painted=!1);await this.display(this.emptyWaitCanvas)}return this.mPenEvents=[],!0},q=function(){},ct=async function(){let t=!1;if(this.mInput){const i=this.mInput.input.length;if(i>0){for(var e=0;e<this.objects.length;e++)if(this.objects[e].type==s.ObjectType.ObjectInputEcho)if(this.objects[e].index==i-1){if(l(this,c,H).call(this,this.objects[e],"_"),this.mInput.input=this.mInput.input.slice(0,i-1),l(this,c,at).call(this,this.objects[e]),this.objects[e].putUnderline)return!0;t=!0}else!this.objects[e].putUnderline&&this.objects[e].index>=i&&l(this,c,H).call(this,this.objects[e]," ")}}return t},at=function(t){for(var e=0;e<this.objects.length;e++)this.objects[e].type==s.ObjectType.ObjectInput&&this.objects[e].onInput&&this.objects[e].onInput(this.mInput.input,t.id,this.objects[e].minLength,this.objects[e].maxLength)},jt=function(t){if(t){const e=s.ButtonOptions.BtnAlignCentre|s.ButtonOptions.BtnAlignLeft|s.ButtonOptions.BtnAlignRight,i=s.ButtonOptions.BtnAlignMiddle|s.ButtonOptions.BtnAlignTop|s.ButtonOptions.BtnAlignBottom,o=e|i;if(t&~o||(t&e)==e||(t&i)==i)return!1}return!0},M=function(t){t.type==s.ObjectType.ObjectCheckbox?l(this,c,vt).call(this,t):t.type==s.ObjectType.ObjectRadioButton?l(this,c,_).call(this,t):t.type==s.ObjectType.ObjectButton&&l(this,c,At).call(this,t)},vt=function(t){const e=document.createElement("canvas");e.width=t.rect.lowerRightXpixel-t.rect.upperLeftXpixel+1,e.height=t.rect.lowerRightYpixel-t.rect.upperLeftYpixel+1;const i=e.getContext("2d");if(i.font=t.font,i.fillStyle=t.backColor,i.fillRect(0,0,e.width,e.height),i.fillStyle=t.foreColor,t.checked==0){const o=i.measureText("☐");i.fillText("☐",0,o.fontBoundingBoxAscent)}else if(t.style==s.CheckboxOptions.CheckboxDisplayCross){const o=i.measureText("☒");i.fillText("☒",0,o.fontBoundingBoxAscent)}else{const o=i.measureText("☑");i.fillText("☑",0,o.fontBoundingBoxAscent)}t.image=e,t.painted=!1},_=function(t){const e=document.createElement("canvas");e.width=t.rect.lowerRightXpixel-t.rect.upperLeftXpixel+1,e.height=t.rect.lowerRightYpixel-t.rect.upperLeftYpixel+1;const i=e.getContext("2d");i.font=t.font,i.fillStyle=t.backColor,i.fillRect(0,0,e.width,e.height),i.fillStyle=t.foreColor;const o=i.measureText("◯");if(i.fillText("◯",0,o.fontBoundingBoxAscent),t.checked){const a=i.measureText("●");i.fillText("●",Math.floor((e.width-a.width)/2),Math.floor((e.height+a.actualBoundingBoxAscent-a.actualBoundingBoxDescent)/2))}t.image=e,t.painted=!1},At=function(t){const e=document.createElement("canvas");e.width=t.rect.lowerRightXpixel-t.rect.upperLeftXpixel+1,e.height=t.rect.lowerRightYpixel-t.rect.upperLeftYpixel+1;const i=e.getContext("2d");i.font=t.font;const o=i.measureText(t.text),a=o.width;o.fontBoundingBoxAscent+o.fontBoundingBoxDescent,t.pushed&&t.config.pushed?(this.useColor?i.fillStyle=t.config.pushed.backColor?t.config.pushed.backColor:t.config.backColor:i.fillStyle=t.config.pushed.invert?"black":"white",i.fillRect(0,0,e.width,e.height),t.config.pushed.border&&t.config.pushed.border.size&&(i.lineWidth=t.config.pushed.border.size,this.useColor?i.strokeStyle=t.config.pushed.border.color:i.fillStyle=t.config.pushed.invert?"white":"color",i.strokeRect(0,0,e.width,e.height))):(this.useColor?i.fillStyle=t.config.backColor:i.fillStyle=t.config.invert?"black":"white",i.fillRect(0,0,e.width,e.height),t.config.border&&t.config.border.size&&(i.lineWidth=t.config.border.size,this.useColor?i.strokeStyle=t.config.border.color:i.fillStyle=t.config.invert?"white":"color",i.strokeRect(0,0,e.width,e.height)));let h=0;t.flags&s.ButtonOptions.BtnAlignLeft?h=0:t.flags&s.ButtonOptions.BtnAlignRight?h=e.width-a:h=Math.floor(e.width/2-a/2),t.flags&s.ButtonOptions.BtnAlignTop||t.flags&s.ButtonOptions.BtnAlignBottom,t.pushed&&t.config.pushed&&t.config.pushed.font?this.useColor?i.fillStyle=t.config.pushed.font.color?t.config.pushed.font.color:t.config.font.color:i.fillStyle=t.config.pushed.invert?"white":"black":this.useColor?i.fillStyle=t.config.font.color:i.fillStyle=t.config.invert?"white":"black",i.fillText(t.text,h,o.fontBoundingBoxAscent),t.image=e,t.painted=!1},$=async function(t){if(!t.checked){for(var e=0;e<this.objects.length;e++)t.group==this.objects[e].group&&this.objects[e].checked&&(this.objects[e].checked=!1,l(this,c,_).call(this,this.objects[e]));t.checked=!0,l(this,c,_).call(this,t)}},Et=function(t){if(typeof t=="number"){const e=s.CheckboxOptions.CheckboxUnchecked|s.CheckboxOptions.CheckboxChecked,i=s.CheckboxOptions.CheckboxDisplayTick|s.CheckboxOptions.CheckboxDisplayCross,o=e|i;if((t&i)!=i&&!(t&~o))return!0}return!1},Dt=function(t){const e=s.PrimitiveOptions.LineSolid|s.PrimitiveOptions.LineDashed;return(t&e)!=e&&!(t&~e)},Mt=function(t){const e=s.PrimitiveOptions.LineSolid|s.PrimitiveOptions.LineDashed,i=s.PrimitiveOptions.Fill|s.PrimitiveOptions.FillXOR,o=s.PrimitiveOptions.Outline|i,a=e|i|s.PrimitiveOptions.Outline;return(t&e)!=e&&(t&i)!=i&&!(t&~a)?(t&o||(t|=s.PrimitiveOptions.Outline),!0):!1},Rt=function(t){let e=!1;const i=this.mInput.input.length;for(var o=0;o<this.objects.length;o++)this.objects[o].type==s.ObjectType.ObjectInputEcho&&(this.objects[o].index==i?(l(this,c,H).call(this,this.objects[o],this.objects[o].data?this.objects[o].data:t.id),this.mInput.input+=t.id,e=!0):this.objects[o].index==i+1&&l(this,c,H).call(this,this.objects[o],"_"));return e},H=async function(t,e){const i=document.createElement("canvas");i.width=t.rect.lowerRightXpixel-t.rect.upperLeftXpixel+1,i.height=t.rect.lowerRightYpixel-t.rect.upperLeftYpixel+1;const o=i.getContext("2d");o.font=t.font;const a=o.measureText(e);o.fillStyle=t.backColor,o.fillRect(0,0,i.width,i.height),o.fillStyle=t.foreColor,o.fillText(e,0,a.fontBoundingBoxAscent),t.putUnderline&&o.fillText("_",0,a.fontBoundingBoxAscent),t.image=i,t.painted=!1},Yt=async function(){let t=new this.sigSDK.StrokeVector,e=new this.sigSDK.PointVector,i=0,o=!0,a=!1;for(let B=0;B<this.mPenData.length;B++)if(!(this.mPenData[B].sw==0&&!a)){a=!0,(o&&this.mPenData[B].sw==0||!o&&this.mPenData[B].sw==1)&&(o=this.mPenData[B].sw==1,t.push_back({points:e}),e.delete(),e=new this.sigSDK.PointVector,i++);var h={x:this.mPenData[B].x,y:this.mPenData[B].y,p:this.mPenData[B].pressure,t:this.mPenData[B].timeCount,azimuth:0,altitude:0,twist:0,is_down:this.mPenData[B].sw,stroke_id:i};e.push_back(h)}var d={device_max_X:this.mCapability.tabletMaxX,device_max_Y:this.mCapability.tabletMaxY,device_max_P:this.mCapability.tabletMaxPressure,device_pixels_per_m_x:1e5,device_pixels_per_m_y:1e5,device_origin_X:0,device_origin_Y:1,device_unit_pixels:!1},u;try{u=await mTablet.getUid2()}catch{}u||(u=0);const b=await Ht(),O=b.os.name+" "+b.os.version,g="",k="STU;'"+this.mInformation.modelName+"';"+this.mInformation.firmwareMajorVersion+"."+(parseInt(this.mInformation.firmwareMinorVersion)>>4&15)+"."+(parseInt(this.mInformation.firmwareMinorVersion)&15)+";"+u,m=1e3;this.who,this.why;const P="";let S=this.sigSDK.KeyType.SHA512,C;this.mSigOptions&&(this.mSigOptions.integrityKey&&(S=this.mSigOptions.integrityKey),this.mSigOptions.documentHash&&(C=this.mSigOptions.documentHash));let T=!1;return C||(C=new this.sigSDK.Hash(this.sigSDK.HashType.None),T=!0),new Promise((B,I)=>{try{const j=this.mSigObj.generateSignature(this.who?this.who:"",this.why?this.why:"",P,S,C,t,d,O,k,g,m);j.then(L=>{T&&C.delete(),t.delete(),e.delete(),B(L)}),j.catch(L=>{T&&C.delete(),t.delete(),e.delete(),I(L)})}catch(j){T&&C.delete(),t.delete(),e.delete(),I(j)}})},Wt=function(t,e){let i=this.ctx.measureText(t),o=t.length-1;for(;i.width>e;){for(;o>0&&t[o]!=" ";o--);i=this.ctx.measureText(t.substring(0,o--))}return o+1},E(s,"ObjectType",{ObjectText:"OBJECT_TEXT",ObjectButton:"OBJECT_BUTTON",ObjectCheckbox:"OBJECT_CHECK_BOX",ObjectRadioButton:"OBJECT_RADIO_BUTTON",ObjectSignature:"OBJECT_SIGNATURE",ObjectInput:"OBJECT_INPUT",ObjectInputEcho:"OBJECT_INPUT_ECHO",ObjectImage:"OBJECT_IMAGE",ObjectDisplayAtShutdown:"OBJECT_DISPLAY_AT_SHUTDOWN",ObjectInking:"OBJECT_INKING",ObjectPrimitive:"OBJECT_PRIMITIVE"}),F(s,w,{PadIndeterminate:0,PadInteractive:1,PadSigning:2,PadInking:3,PadInput:4,PadShutdown:5}),E(s,"ButtonOptions",{BtnAlignCentre:0,BtnAlignMiddle:0,BtnAlignLeft:1,BtnAlignRight:2,BtnAlignTop:4,BtnAlignBottom:8,BtnInvert:16,BtnGreyed:32,BtnHiLiteClick:64}),E(s,"CheckboxOptions",{CheckboxUnchecked:0,CheckboxChecked:1,CheckboxDisplayTick:2,CheckboxDisplayCross:4}),E(s,"InputEchoOptions",{EchoNoSpacing:0,EchoHalfSpacing:1,EchoSingleSpacing:2,EchoDoubleSpacing:4,EchoUnderline:8}),E(s,"PrimitiveType",{Line:0,Rectangle:1,Ellipse:2}),E(s,"PrimitiveOptions",{LineSolid:1,LineDashed:2,Outline:4,Fill:8,FillXOR:16});let f=s;f.Point=class{constructor(p,t){this.x=p,this.y=t}};const Q=class Q{constructor(t,e){switch(this.width=t,this.height=e,t){case 640:break;case 800:this.stu=Q.STU5X0;break;case 396:break;case 320:this.stu=Q.STU430;break}}};E(Q,"STU430",{titleSize:"16pt",tileLineWidth:5,descriptionWidth:"10pt",buttonTextWidth:"14pt",buttonWidth:100,buttonBorderSize:2,subTitleWidth:"12pt",controlTextWidth:"8pt",controlLeft:10,controlTop1:80,controlTop2:100,controlTop3:130,bigControlSize:"20pt",inputTextWidth:"10pt",inputButtonTextWidth:"10pt",inputButtonWidth:20,imageButtonWidth:100,imageButtonHeight:40,shape:{line1X1:10,line1Y1:70,line1X2:110,line1Y2:70,line2X1:130,line2Y1:70,line2X2:230,line2Y2:70,rect1X1:10,rect1Y1:80,rect1X2:60,rect1Y2:100,rect2X1:90,rect2Y1:80,rect2X2:140,rect2Y2:100,rect3X1:170,rect3Y1:80,rect3X2:220,rect3Y2:100,rect4X1:250,rect4Y1:80,rect4X2:300,rect4Y2:100,ellipse1X1:10,ellipse1Y1:120,ellipse1X2:60,ellipse1Y2:170,ellipse2X1:90,ellipse2Y1:120,ellipse2X2:140,ellipse2Y2:170,ellipse3X1:170,ellipse3Y1:120,ellipse3X2:220,ellipse3Y2:170,ellipse4X1:250,ellipse4Y1:120,ellipse4X2:300,ellipse4Y2:170,lineWidth:4},xCharPosX:20,xCharPosY:100,xCharFontSize:"15pt",signLinePosX:40,signLinePosY:100,signLineFontSize:"15pt",signLine:"..............................",whoFontSize:"12pt"}),E(Q,"STU5X0",{titleSize:"40pt",tileLineWidth:10,descriptionWidth:"20pt",buttonTextWidth:"30pt",buttonWidth:200,buttonBorderSize:8,subTitleWidth:"20pt",controlTextWidth:"20pt",controlLeft:100,controlTop1:150,controlTop2:200,controlTop3:260,bigControlSize:"50pt",inputTextWidth:"20pt",inputButtonTextWidth:"30pt",inputButtonWidth:60,imageButtonWidth:100,imageButtonHeight:40,shape:{line1X1:10,line1Y1:150,line1X2:210,line1Y2:150,line2X1:230,line2Y1:150,line2X2:430,line2Y2:150,rect1X1:10,rect1Y1:200,rect1X2:60,rect1Y2:250,rect2X1:90,rect2Y1:200,rect2X2:140,rect2Y2:250,rect3X1:170,rect3Y1:200,rect3X2:220,rect3Y2:250,rect4X1:250,rect4Y1:200,rect4X2:300,rect4Y2:250,ellipse1X1:10,ellipse1Y1:270,ellipse1X2:60,ellipse1Y2:320,ellipse2X1:90,ellipse2Y1:270,ellipse2X2:140,ellipse2Y2:320,ellipse3X1:170,ellipse3Y1:270,ellipse3X2:220,ellipse3Y2:320,ellipse4X1:250,ellipse4Y1:270,ellipse4X2:300,ellipse4Y2:320,lineWidth:4},xCharPosX:80,xCharPosY:250,xCharFontSize:"32pt",signLinePosX:110,signLinePosY:250,signLineFontSize:"32pt",signLine:"........................................",whoFontSize:"20pt"});let lt=Q;const Kt="data:image/png;base64,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",Gt="/assets/accept_btn_bw-BVIRhY8a.png",Nt="data:image/png;base64,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",Vt="/assets/cancel_btn_bw-CP1e_iq8.png",Zt="/assets/STU300-D_Ki0_Ey.png",qt="/assets/STU430-DYA3e5Sy.png",_t="/assets/STU500-DV1tFOUu.png",$t="/assets/STU530-540-CrHrw_6c.png";let X,J,ht,n,r,tt;try{X=await new Qt,document.getElementById("version_txt").innerHTML=X.VERSION,J=new X.SigObj;const p=J.setLicence("7c31f853-d5dd-48f1-8414-5ffe3c412f32","vi/z9ICyX1MB8sXMRdVhhN+XdVwovycD1jdE0PtWMejrQVSakuEoHNSgyi3sbdBuXTn7yZZ1jaokpuvA5yehfQ==");p.then(t=>{t&&(navigator.hid&&(document.getElementById("start_wizard").disabled=!1),ht=new X.Hash(X.HashType.None),n=new f(X),document.getElementById("document_hash").disabled=!1,document.getElementById("initializeBanground").style.display="none")}),p.catch(t=>{alert(t),document.getElementById("initializeBanground").style.display="none"})}catch(p){alert("Error initializing SigSDK "+p),document.getElementById("initializeBanground").style.display="none"}window.startWizard=async function(){const p={};p.encryptionHandler=new Jt,p.encryptionHandler2=new Ft,await n.padConnect(p);const t=document.getElementById("mirror_div");t.style.width=n.padWidth()+"px",t.style.height=n.padHeight()+"px",t.style.display="block",document.getElementById("signature_div").style.display="none",r=new lt(n.padWidth(),n.padHeight()),await zt(),document.getElementById("start_wizard").disabled=!0,document.getElementById("stop_wizard").disabled=!1};window.stopWizard=async function(){await ne(),document.getElementById("start_wizard").disabled=!1,document.getElementById("stop_wizard").disabled=!0};window.showMirrorChanged=function(p){p.checked?document.getElementById("mirror_div").style.display="block":document.getElementById("mirror_div").style.display="none"};window.mirrorInputChanged=function(p){n.setProperty({mirrorDiv:{enable:p.checked}})};window.encryptionChanged=function(p){n.setProperty({encrypted:p.checked,sessionId:12648430})};window.monochromeChanged=function(p){n.setProperty({forceMonochrome:p.checked})};function gt(p){var t=window.devicePixelRatio,e=25.4,i=96;return p/e*i/t}async function te(){let p=gt(J.getWidth(!1)/100);const t=gt(J.getHeight(!1)/100);return p+=p%4,await J.renderBitmap(p,t,"image/png",3,"blue","white",0,0,0)}window.fireClick=async function(p){tt||(tt=!0,await n.fireClick(p),tt=!1)};async function R(){await n.reset(),document.getElementById("show_mirror_checkbox").checked&&n.setProperty({mirrorDiv:{id:"mirror_div",enable:document.getElementById("enable_mirror_checkbox").checked}}),await n.setProperty({forceMonochrome:document.getElementById("force_monochrome_checkbox").checked,encrypted:document.getElementById("enable_encryption_checkbox").checked,sessionId:12648430})}async function zt(){await R(),n.setProperty({font:{name:"verdana",size:r.stu.titleSize,color:"black"}});const p=n.addObjectText("","left","top","Wizard Demo");n.setProperty({borderColor:"red"}),n.addPrimitive(f.PrimitiveType.Line,"left",p.rect.lowerRightYpixel,"right",p.rect.lowerRightYpixel,r.stu.tileLineWidth),n.setProperty({backColor:"white"}),n.setProperty({font:{name:"arial",size:r.stu.descriptionWidth,color:"blue"}}),n.addObjectText("","centre","middle",`In this demo we will go through all the Wizard options.
Press "Cancel" to stop or "Start" to continue.`),n.setProperty({font:{name:"verdana",size:r.stu.buttonTextWidth,color:"black"}}),n.setProperty({backColor:"#D3D3D3",border:{size:r.stu.buttonBorderSize,color:"black"},pushed:{backColor:"#A9A9A9",font:{color:"black"},border:{size:r.stu.buttonBorderSize,color:"#D3D3D3"}}});const t=n.addObjectButton("cancel","left","bottom","Cancel",r.stu.buttonWidth);t.onClick=async function(){return await stopWizard(),!0},n.setProperty({font:{color:"green"},pushed:{font:{color:"green"}}});const e=n.addObjectButton("start","right","bottom","Start >>",r.stu.buttonWidth);e.onClick=async function(){return await ee(),!0},await n.display(document.getElementById("show_wait_checkbox").checked),Y(["cancel_btn","start_btn"])}async function ee(){await R(),n.setProperty({font:{name:"verdana",size:r.stu.titleSize,color:"black"}});const p=n.addObjectText("","left","top","Wizard Demo");n.setProperty({borderColor:"red"});const t=n.addPrimitive(f.PrimitiveType.Line,"left",p.rect.lowerRightYpixel,"right",p.rect.lowerRightYpixel,r.stu.tileLineWidth);n.setProperty({backColor:"white"}),n.setProperty({font:{size:r.stu.subTitleWidth,color:"blue",style:"bold"}}),n.addObjectText("",10,t.rect.lowerRightYpixel+10,"Checkbox control"),n.setProperty({font:{size:r.stu.subTitleWidth,color:"black",style:" "}}),n.addObjectText("","right",10,"Step 1 of 6"),n.setProperty({font:{name:"arial",size:r.stu.controlTextWidth,color:"black"}}),n.addObjectCheckBox("checkbox1",r.stu.controlLeft,r.stu.controlTop1,"This is a checkbox with the default options."),n.addObjectCheckBox("checkbox2",r.stu.controlLeft,r.stu.controlTop2,"Checkbox checked by default with cross instead of tick.",f.CheckboxOptions.CheckboxChecked|f.CheckboxOptions.CheckboxDisplayCross),n.setProperty({checkbox:{size:r.stu.bigControlSize}});const e=n.addObjectCheckBox("checkbox3",r.stu.controlLeft,r.stu.controlTop3,"Checkbox with bigger Box. You need to check this checkbox to go to the next step.");n.setProperty({font:{name:"verdana",size:r.stu.buttonTextWidth,color:"black"}}),n.setProperty({backColor:"#D3D3D3",border:{size:r.stu.buttonBorderSize,color:"black"},pushed:{backColor:"#A9A9A9",font:{color:"black"},border:{size:r.stu.buttonBorderSize,color:"#D3D3D3"}}});const i=n.addObjectButton("back","left","bottom","<< Back",r.stu.buttonWidth);i.onClick=async function(){return await zt(),!0},n.setProperty({font:{color:"green"},pushed:{font:{color:"green"}}});const o=n.addObjectButton("next","right","bottom","Next >>",r.stu.buttonWidth);o.onClick=async function(){return e.checked?(await dt(),!0):!1},await n.display(document.getElementById("show_wait_checkbox").checked),Y(["back_btn","next_btn","big_check_btn"])}async function dt(){await R(),n.setProperty({font:{name:"verdana",size:r.stu.titleSize,color:"black"}});const p=n.addObjectText("","left","top","Wizard Demo");n.setProperty({borderColor:"red"});const t=n.addPrimitive(f.PrimitiveType.Line,"left",p.rect.lowerRightYpixel,"right",p.rect.lowerRightYpixel,r.stu.tileLineWidth);n.setProperty({backColor:"white"}),n.setProperty({font:{size:r.stu.subTitleWidth,color:"blue",style:"bold"}}),n.addObjectText("",10,t.rect.lowerRightYpixel+10,"Radio button control"),n.setProperty({font:{size:r.stu.subTitleWidth,color:"black",style:" "}}),n.addObjectText("","right",t.rect.lowerRightYpixel+10,"Step 2 of 6"),n.setProperty({font:{name:"arial",size:r.stu.controlTextWidth,color:"black"}}),n.addObjectRadioButton("radio1",r.stu.controlLeft,r.stu.controlTop1,"This is a radio button with the default options.",{Group:"group1"}),n.addObjectRadioButton("radio2",r.stu.controlLeft,r.stu.controlTop2,"Second option of the radio buttons",{Group:"group1",Checked:!0}),n.setProperty({radiobutton:{size:r.stu.bigControlSize}}),n.addObjectRadioButton("radio3",r.stu.controlLeft,r.stu.controlTop3,"Radio button with bigger select circle.",{Group:"group1"}),n.setProperty({font:{name:"verdana",size:r.stu.buttonTextWidth,color:"black"}}),n.setProperty({backColor:"#D3D3D3",border:{size:r.stu.buttonBorderSize,color:"black"},pushed:{backColor:"#A9A9A9",font:{color:"black"},border:{size:r.stu.buttonBorderSize,color:"#D3D3D3"}}});const e=n.addObjectButton("back","left","bottom","<< Back",r.stu.buttonWidth);e.onClick=async function(){return await dt(),!0},n.setProperty({font:{color:"green"},pushed:{font:{color:"green"}}});const i=n.addObjectButton("next","right","bottom","Next >>",r.stu.buttonWidth);i.onClick=async function(){return await ie(),!0},await n.display(document.getElementById("show_wait_checkbox").checked),Y(["back_btn","next_btn","big_radio_btn"])}async function ie(){await R(),n.setProperty({font:{name:"verdana",size:r.stu.titleSize,color:"black"}});const p=n.addObjectText("","left","top","Wizard Demo");n.setProperty({borderColor:"red"});const t=n.addPrimitive(f.PrimitiveType.Line,"left",p.rect.lowerRightYpixel,"right",p.rect.lowerRightYpixel,r.stu.tileLineWidth);n.setProperty({backColor:"white"}),n.setProperty({font:{size:r.stu.subTitleWidth,color:"blue",style:"bold"}}),n.addObjectText("",10,t.rect.lowerRightYpixel+10,"Input control"),n.setProperty({font:{size:r.stu.subTitleWidth,color:"black",style:" "}});const e=n.addObjectText("","right",t.rect.lowerRightYpixel+10,"Step 3 of 6");n.setProperty({font:{size:r.stu.inputTextWidth}});const i=n.addObject(f.ObjectType.ObjectText,"txt",10,e.rect.lowerRightYpixel+10,"Enter a 4 digit PIN code: ",null),o=i.rect.lowerRightXpixel-i.rect.upperLeftXpixel,a=i.rect.lowerRightYpixel-i.rect.upperLeftYpixel;n.setProperty({backColor:"white",borderColor:"black"}),n.setProperty({font:{size:r.stu.inputTextWidth}});const h={minLength:1,maxLength:4},d=n.addObject(f.ObjectType.ObjectInput,"Input",0,0,h,null);d.onInput=function(C,T,v,B){console.log("Pressed "+T+" the text is "+C+" with min lenght: "+v+" and maxLength: "+B)};let u=0;document.getElementById("input_echo_underscore").checked&&(u|=f.InputEchoOptions.EchoUnderline);let b=document.getElementById("input_echo_char").value;switch(b.length>0?b=b[0]:b=null,document.getElementById("input_echo_spacing").value){case"no_spacing":u|=f.InputEchoOptions.EchoNoSpacing;break;case"half_spacing":u|=f.InputEchoOptions.EchoHalfSpacing;break;case"single_spacing":u|=f.InputEchoOptions.EchoSingleSpacing;break;case"double_spacing":u|=f.InputEchoOptions.EchoDoubleSpacing;break}n.addObject(f.ObjectType.ObjectInputEcho,"",i.rect.upperLeftXpixel+o+10,i.rect.upperLeftYpixel,b,u),n.setProperty({font:{name:"verdana",size:r.stu.inputButtonTextWidth,style:"bold"}}),n.setProperty({border:{size:3,color:"black"}}),n.setProperty({backColor:"grey",borderColor:"black"}),n.setProperty({pushed:{font:{color:"blue"},backColor:"green",invert:!0}});const g=r.stu.inputButtonWidth;let k=i.rect.upperLeftYpixel+a+10,m=n.padWidth()/2-g/2-2*g;n.addObject(f.ObjectType.ObjectButton,"1",m,k,"1",g),m=n.padWidth()/2-g/2,n.addObject(f.ObjectType.ObjectButton,"2",m,k,"2",g),m+=2*g,n.addObject(f.ObjectType.ObjectButton,"3",m,k,"3",g),m=n.padWidth()/2-g/2-2*g,k+=g,n.addObject(f.ObjectType.ObjectButton,"4",m,k,"4",g),m=n.padWidth()/2-g/2,n.addObject(f.ObjectType.ObjectButton,"5",m,k,"5",g),m+=2*g,n.addObject(f.ObjectType.ObjectButton,"6",m,k,"6",g),m=n.padWidth()/2-g/2-2*g,k+=g,n.addObject(f.ObjectType.ObjectButton,"7",m,k,"7",g),m=n.padWidth()/2-g/2,n.addObject(f.ObjectType.ObjectButton,"8",m,k,"8",g),m+=2*g,n.addObject(f.ObjectType.ObjectButton,"9",m,k,"9",g),m=n.padWidth()/2-g/2-2*g,k+=g,n.setProperty({border:{size:3,color:"green"}}),n.setProperty({backColor:"red",borderColor:"blue"}),n.setProperty({pushed:{font:{color:"blue"},backColor:"green",invert:!0}}),n.addObject(f.ObjectType.ObjectButton,"delete",m,k,"<< Delete",3*g),n.setProperty({border:{size:3,color:"black"}}),n.setProperty({backColor:"grey",borderColor:"black"}),n.setProperty({pushed:{font:{color:"blue"},backColor:"green",invert:!0}}),m=n.padWidth()/2-g/2+2*g,n.addObject(f.ObjectType.ObjectButton,"0",m,k,"0",g),n.setProperty({font:{name:"verdana",size:r.stu.buttonTextWidth,color:"black"}}),n.setProperty({backColor:"#D3D3D3",border:{size:r.stu.buttonBorderSize,color:"black"},pushed:{backColor:"#A9A9A9",font:{color:"black"},border:{size:r.stu.buttonBorderSize,color:"#D3D3D3"}}});const P=n.addObjectButton("back","left","bottom","<< Back",r.stu.buttonWidth);P.onClick=async function(){return await dt(),!0},n.addObjectButton("clear","centre","bottom","Clear",r.stu.buttonWidth),n.setProperty({font:{color:"green"},pushed:{font:{color:"green"}}});const S=n.addObjectButton("next","right","bottom","Next >>",r.stu.buttonWidth);S.onClick=async function(){return await pt(),!0},await n.display(document.getElementById("show_wait_checkbox").checked),Y(["back_btn","next_btn","clear_btn"])}async function pt(){await R();const p=!document.getElementById("force_monochrome_checkbox").checked&&n.padWidth()==800;let t="";switch(n.padModelName()){case"STU-300":t=Zt;break;case"STU-500":t=_t;break;case"STU-430":t=qt;break;default:t=$t}const e=await et(t);n.addObject(f.ObjectType.ObjectImage,"img","centre","bottom",e),n.setProperty({font:{name:"verdana",size:r.stu.titleSize,color:"black"}}),n.setProperty({backColor:"#B1B3B3"});const i=n.addObjectText("","left","top","Wizard Demo");n.setProperty({borderColor:"red"});const o=n.addPrimitive(f.PrimitiveType.Line,"left",i.rect.lowerRightYpixel,"right",i.rect.lowerRightYpixel,r.stu.tileLineWidth);n.setProperty({backColor:"#B1B3B3"}),n.setProperty({font:{size:r.stu.subTitleWidth,color:"blue",style:"bold"}}),n.addObjectText("",10,o.rect.lowerRightYpixel+10,"Image object"),n.setProperty({font:{size:r.stu.subTitleWidth,color:"black",style:" "}}),n.addObjectText("","right",o.rect.lowerRightYpixel+10,"Step 4 of 6");const a=await et(p?Kt:Gt);a.width=40,a.height=20;const h={};r.stu.imageButtonWidth&&(h.width=r.stu.imageButtonWidth),r.stu.imageButtonHeight&&(h.height=r.stu.imageButtonHeight);const d=n.addObject(f.ObjectType.ObjectImage,"next","right","bottom",a,h);d.onClick=async function(){return await Xt(),!0};const u=await et(p?Nt:Vt),b=n.addObject(f.ObjectType.ObjectImage,"back","left","bottom",u,h);b.onClick=async function(){return await pt(),!0},await n.display(document.getElementById("show_wait_checkbox").checked),Y(["back_btn","next_btn"])}async function Xt(){await R(),n.setProperty({font:{name:"verdana",size:r.stu.titleSize,color:"black"}});const p=n.addObjectText("","left","top","Wizard Demo");n.setProperty({borderColor:"red"});const t=n.addPrimitive(f.PrimitiveType.Line,"left",p.rect.lowerRightYpixel,"right",p.rect.lowerRightYpixel,r.stu.tileLineWidth);n.setProperty({font:{size:r.stu.subTitleWidth,color:"blue",style:"bold"}}),n.addObjectText("",10,t.rect.lowerRightYpixel+10,"Primitive objects"),n.setProperty({font:{size:r.stu.subTitleWidth,color:"black",style:" "}}),n.addObjectText("","right",t.rect.lowerRightYpixel+10,"Step 6 of 6"),n.setProperty({fillColor:"green",borderColor:"blue"}),n.addPrimitive(f.PrimitiveType.Line,r.stu.shape.line1X1,r.stu.shape.line1Y1,r.stu.shape.line1X2,r.stu.shape.line1Y2,r.stu.shape.lineWidth,f.PrimitiveOptions.LineSolid),n.addPrimitive(f.PrimitiveType.Line,r.stu.shape.line2X1,r.stu.shape.line2Y1,r.stu.shape.line2X2,r.stu.shape.line2Y2,r.stu.shape.lineWidth,f.PrimitiveOptions.LineDashed),n.addPrimitive(f.PrimitiveType.Rectangle,r.stu.shape.rect1X1,r.stu.shape.rect1Y1,r.stu.shape.rect1X2,r.stu.shape.rect1Y2,r.stu.shape.lineWidth),n.addPrimitive(f.PrimitiveType.Rectangle,r.stu.shape.rect2X1,r.stu.shape.rect2Y1,r.stu.shape.rect2X2,r.stu.shape.rect2Y2,r.stu.shape.lineWidth,f.PrimitiveOptions.LineSolid|f.PrimitiveOptions.Fill),n.addPrimitive(f.PrimitiveType.Rectangle,r.stu.shape.rect3X1,r.stu.shape.rect3Y1,r.stu.shape.rect3X2,r.stu.shape.rect3Y2,r.stu.shape.lineWidth,f.PrimitiveOptions.LineDashed|f.PrimitiveOptions.Fill),n.addPrimitive(f.PrimitiveType.Rectangle,r.stu.shape.rect4X1,r.stu.shape.rect4Y1,r.stu.shape.rect4X2,r.stu.shape.rect4Y2,r.stu.shape.lineWidth,f.PrimitiveOptions.Fill),n.addPrimitive(f.PrimitiveType.Ellipse,r.stu.shape.ellipse1X1,r.stu.shape.ellipse1Y1,r.stu.shape.ellipse1X2,r.stu.shape.ellipse1Y2,r.stu.shape.lineWidth),n.addPrimitive(f.PrimitiveType.Ellipse,r.stu.shape.ellipse2X1,r.stu.shape.ellipse2Y1,r.stu.shape.ellipse2X2,r.stu.shape.ellipse2Y2,r.stu.shape.lineWidth,f.PrimitiveOptions.LineSolid|f.PrimitiveOptions.Fill),n.addPrimitive(f.PrimitiveType.Ellipse,r.stu.shape.ellipse3X1,r.stu.shape.ellipse3Y1,r.stu.shape.ellipse3X2,r.stu.shape.ellipse3Y2,r.stu.shape.lineWidth,f.PrimitiveOptions.LineDashed|f.PrimitiveOptions.Fill),n.addPrimitive(f.PrimitiveType.Ellipse,r.stu.shape.ellipse4X1,r.stu.shape.ellipse4Y1,r.stu.shape.ellipse4X2,r.stu.shape.ellipse4Y2,r.stu.shape.lineWidth,f.PrimitiveOptions.Fill),n.setProperty({font:{name:"verdana",size:r.stu.buttonTextWidth,color:"black"}}),n.setProperty({backColor:"#D3D3D3",border:{size:r.stu.buttonBorderSize,color:"black"},pushed:{backColor:"#A9A9A9",font:{color:"black"},border:{size:r.stu.buttonBorderSize,color:"#D3D3D3"}}});const e=n.addObjectButton("back","left","bottom","<< Back",r.stu.buttonWidth);e.onClick=async function(){return await pt(),!0},n.setProperty({font:{color:"green"},pushed:{font:{color:"green"}}});const i=n.addObjectButton("next","right","bottom","Next >>",r.stu.buttonWidth);i.onClick=async function(){return await oe(),!0},await n.display(document.getElementById("show_wait_checkbox").checked),Y(["back_btn","next_btn"])}async function oe(){await R();const p={integrityKey:X.KeyType.SHA512};ht&&(p.documentHash=ht);const t=n.addObjectSignature("Sig",J,p);t.onSignatureCaptured=async function(d){return document.getElementById("signatureImage").src=await te(),document.getElementById("mirror_div").style.display="none",document.getElementById("signature_div").style.display="block",await stopWizard(),!0},n.setProperty({font:{name:"verdana",size:r.stu.titleSize,color:"black"}});const e=n.addObjectText("","left","top","Wizard Demo");n.setProperty({borderColor:"red"});const i=n.addPrimitive(f.PrimitiveType.Line,"left",e.rect.lowerRightYpixel,"right",e.rect.lowerRightYpixel,r.stu.tileLineWidth);n.setProperty({backColor:"white"}),n.setProperty({font:{size:r.stu.subTitleWidth,color:"blue",style:"bold"}}),n.addObjectText("",10,i.rect.lowerRightYpixel+10,"Signature object"),n.setProperty({font:{size:r.stu.subTitleWidth,color:"black",style:" "}}),n.addObjectText("","right",i.rect.lowerRightYpixel+10,"Step 7 of 7"),n.setProperty({font:{size:r.stu.xCharFontSize}}),n.addObjectText("",r.stu.xCharPosX,r.stu.xCharPosY,"X"),n.setProperty({font:{size:r.stu.signLineFontSize}}),n.addObjectText("",r.stu.signLinePosX,r.stu.signLinePosY,r.stu.signLine),n.setProperty({font:{name:"Verdana",size:r.stu.whoFontSize,style:" "}});const o=n.addObjectText("who","right",.65*n.padHeight(),document.getElementById("who").value),a=o.rect.lowerRightYpixel-o.rect.upperLeftYpixel;n.addObjectText("why","right",.65*n.padHeight()+a+10,document.getElementById("why").value),n.setProperty({font:{name:"verdana",size:r.stu.buttonTextWidth,color:"black"}}),n.setProperty({backColor:"#D3D3D3",border:{size:r.stu.buttonBorderSize,color:"black"},pushed:{backColor:"#A9A9A9",font:{color:"black"},border:{size:r.stu.buttonBorderSize,color:"#D3D3D3"}}});const h=n.addObjectButton("back","left","bottom","<< Back",r.stu.buttonWidth);h.onClick=async function(){return await Xt(),!0},n.addObjectButton("clear","centre","bottom","Clear",r.stu.buttonWidth),n.setProperty({font:{color:"green"},pushed:{font:{color:"green"}}}),n.addObjectButton("ok","right","bottom","Ok",r.stu.buttonWidth),await n.display(document.getElementById("show_wait_checkbox").checked),Y(["back_btn","clear_btn","ok_btn"])}async function ne(){await R(),n.setProperty({font:{name:"verdana",size:r.stu.titleSize,color:"black"}}),n.addObject(f.ObjectType.ObjectText,"txt1","centre","top",n.padModelName(),null),n.addObject(f.ObjectType.ObjectDisplayAtShutdown,"txt",0,0),await n.display(document.getElementById("show_wait_checkbox").checked),await n.padDisconnect(),Y([])}function et(p){return new Promise((t,e)=>{const i=new Image;i.onload=()=>t(i),i.onerror=e,i.src=p})}function Y(p){document.getElementById("start_btn").disabled=!0,document.getElementById("back_btn").disabled=!0,document.getElementById("next_btn").disabled=!0,document.getElementById("cancel_btn").disabled=!0,document.getElementById("clear_btn").disabled=!0,document.getElementById("ok_btn").disabled=!0,document.getElementById("big_check_btn").disabled=!0,document.getElementById("big_radio_btn").disabled=!0;for(var t=0;t<p.length;t++)document.getElementById(p[t]).disabled=!1}
